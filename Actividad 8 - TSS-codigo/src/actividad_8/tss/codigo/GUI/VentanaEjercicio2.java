
package actividad_8.tss.codigo.GUI;

import java.awt.Color;
import java.awt.Dimension;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JTextArea;
import javax.swing.table.DefaultTableModel;
import org.apache.commons.math3.distribution.LogNormalDistribution;
import org.apache.commons.math3.distribution.NormalDistribution;
import org.apache.commons.math3.distribution.PoissonDistribution;
import org.apache.commons.math3.random.JDKRandomGenerator;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.chart.plot.PlotOrientation;
import org.jfree.chart.plot.XYPlot;
import org.jfree.data.category.DefaultCategoryDataset;
import org.jfree.data.statistics.HistogramDataset;
//import org.apache.commons.math3.distribution.NormalDistribution;
//import org.apache.commons.math3.distribution.TDistribution;

public class VentanaEjercicio2 extends javax.swing.JPanel {

    public VentanaEjercicio2() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jProgressBar1 = new javax.swing.JProgressBar();
        jScrollPane1 = new javax.swing.JScrollPane();
        PanelEjercicio1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        textRecuperacion = new javax.swing.JTextField();
        textTiempoMeseta = new javax.swing.JTextField();
        btnEjemplo = new javax.swing.JButton();
        jLabel7 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tablaFinal = new javax.swing.JTable();
        btnCrearTabla = new javax.swing.JButton();
        btnGenerador = new javax.swing.JButton();
        textTazaPozo = new javax.swing.JTextField();
        jScrollPane4 = new javax.swing.JScrollPane();
        tablaEstadisticos = new javax.swing.JTable();
        jLabel19 = new javax.swing.JLabel();
        jLabel20 = new javax.swing.JLabel();
        jLabel21 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        textPetroleoAlmac = new javax.swing.JTextField();
        jLabel22 = new javax.swing.JLabel();
        textPozosAPerforar = new javax.swing.JTextField();
        jLabel23 = new javax.swing.JLabel();
        textTazaMinima = new javax.swing.JTextField();
        jLabel24 = new javax.swing.JLabel();
        textFactDescuento = new javax.swing.JTextField();
        btnGraficarEjercicio2 = new javax.swing.JButton();
        jLabel25 = new javax.swing.JLabel();
        textCostoPozo = new javax.swing.JTextField();
        jLabel26 = new javax.swing.JLabel();
        textTamInstalacion = new javax.swing.JTextField();
        jLabel27 = new javax.swing.JLabel();
        textMargenPetroleo = new javax.swing.JTextField();
        jLabel28 = new javax.swing.JLabel();
        textMesetaTermina = new javax.swing.JTextField();
        jLabel29 = new javax.swing.JLabel();
        textTazaMeseta = new javax.swing.JTextField();
        jScrollPane3 = new javax.swing.JScrollPane();
        tablaCostosInstalacion = new javax.swing.JTable();
        jLabel6 = new javax.swing.JLabel();
        jLabel30 = new javax.swing.JLabel();
        jLabel31 = new javax.swing.JLabel();
        jLabel32 = new javax.swing.JLabel();
        jLabel33 = new javax.swing.JLabel();
        jLabel34 = new javax.swing.JLabel();
        jLabel35 = new javax.swing.JLabel();
        jLabel36 = new javax.swing.JLabel();
        jLabel37 = new javax.swing.JLabel();
        jLabel38 = new javax.swing.JLabel();
        jLabel39 = new javax.swing.JLabel();
        jLabel40 = new javax.swing.JLabel();
        jLabel41 = new javax.swing.JLabel();
        btnCalcularVariables = new javax.swing.JButton();
        jLabel12 = new javax.swing.JLabel();
        jLabel42 = new javax.swing.JLabel();
        jLabel43 = new javax.swing.JLabel();
        jLabel44 = new javax.swing.JLabel();
        jLabel45 = new javax.swing.JLabel();
        jLabel46 = new javax.swing.JLabel();
        jLabel47 = new javax.swing.JLabel();
        jLabel48 = new javax.swing.JLabel();
        textCalcReserva = new javax.swing.JTextField();
        textCalcTazaMax = new javax.swing.JTextField();
        textCalcTazaMeseta = new javax.swing.JTextField();
        textCalcAumentoProd = new javax.swing.JTextField();
        textCalcProdMeseta = new javax.swing.JTextField();
        textCalcFinMeseta = new javax.swing.JTextField();
        textCalcFactDeclive = new javax.swing.JTextField();
        textCalcVidaProd = new javax.swing.JTextField();
        jLabel49 = new javax.swing.JLabel();
        jLabel50 = new javax.swing.JLabel();
        jLabel56 = new javax.swing.JLabel();
        jLabel55 = new javax.swing.JLabel();
        jLabel54 = new javax.swing.JLabel();
        jLabel57 = new javax.swing.JLabel();
        jLabel51 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();

        setPreferredSize(new java.awt.Dimension(890, 560));

        PanelEjercicio1.setBackground(new java.awt.Color(102, 102, 102));
        PanelEjercicio1.setCursor(new java.awt.Cursor(java.awt.Cursor.DEFAULT_CURSOR));
        PanelEjercicio1.setPreferredSize(new java.awt.Dimension(2100, 1650));

        jLabel1.setFont(new java.awt.Font("Segoe UI", 1, 24)); // NOI18N
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("EJERCICIO 2 - CAMPO PETROLIFERO");

        jLabel10.setText("-------------------------------------------------");

        jLabel5.setFont(new java.awt.Font("Dialog", 1, 12)); // NOI18N
        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel5.setText("Variables de Entrada");

        textRecuperacion.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textRecuperacionActionPerformed(evt);
            }
        });

        btnEjemplo.setText("Ejercicio de Ejemplo");
        btnEjemplo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEjemploActionPerformed(evt);
            }
        });

        jLabel7.setText("TABLA SIMULACION 1");

        tablaFinal.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "AÃ±os", "Taza Anualizada", "Prod Anual", "Petroleo Acumulado", "Precio Acum de Petroleo"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, true, true, true, true
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane2.setViewportView(tablaFinal);

        btnCrearTabla.setFont(new java.awt.Font("Dialog", 1, 18)); // NOI18N
        btnCrearTabla.setText("CREAR TABLA");
        btnCrearTabla.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCrearTablaActionPerformed(evt);
            }
        });

        btnGenerador.setText("Generar");
        btnGenerador.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGeneradorActionPerformed(evt);
            }
        });

        textTazaPozo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textTazaPozoActionPerformed(evt);
            }
        });

        tablaEstadisticos.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {"RESERVAS DESCONTADAS", null, null},
                {"COSTOS DE POZOS", null, null},
                {"COSTOS DE INSTALACION", null, null},
                {"VPN", null, null}
            },
            new String [] {
                "Detalle", "Cantidad", "Unidades"
            }
        ));
        jScrollPane4.setViewportView(tablaEstadisticos);

        jLabel19.setText("T. hasta meseta");

        jLabel20.setText("Recuperacion");

        jLabel21.setText("Taza del pozo");

        jLabel11.setText("Petroleo Almacenado:");

        textPetroleoAlmac.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textPetroleoAlmacActionPerformed(evt);
            }
        });

        jLabel22.setText("Pozos a perforar");

        textPozosAPerforar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textPozosAPerforarActionPerformed(evt);
            }
        });

        jLabel23.setText("Tasa Minima");

        jLabel24.setText("Fact. de Descuento");

        textFactDescuento.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textFactDescuentoActionPerformed(evt);
            }
        });

        btnGraficarEjercicio2.setText("Graficar");
        btnGraficarEjercicio2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGraficarEjercicio2ActionPerformed(evt);
            }
        });

        jLabel25.setText("Costo del Pozo");

        textCostoPozo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textCostoPozoActionPerformed(evt);
            }
        });

        jLabel26.setText("Tam. instalacion");

        jLabel27.setText("Margen de Petroleo");

        textMargenPetroleo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textMargenPetroleoActionPerformed(evt);
            }
        });

        jLabel28.setText("Meseta termina en:");

        jLabel29.setText("Taza de meseta es:");

        tablaCostosInstalacion.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {"0", "50", "70"},
                {"50", "100", "130"},
                {"100", "150", "180"},
                {"150", "200", "220"},
                {"200", "250", "250"},
                {"250", "300", "270"},
                {"300", "350", "280"}
            },
            new String [] {
                "PRODUCCION MIN", "PRODUCCION MAX", "COSTO"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane3.setViewportView(tablaCostosInstalacion);

        jLabel6.setFont(new java.awt.Font("Dialog", 1, 12)); // NOI18N
        jLabel6.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel6.setText("CALCULO DE VARIABLES");

        jLabel30.setText("Millonde de barriles");

        jLabel31.setText("%");

        jLabel32.setText("AÃ±os");

        jLabel33.setText("miles de barriles/dia");

        jLabel34.setText("Millonde de $");

        jLabel35.setText("%");

        jLabel36.setText("Miles de barriles/dia");

        jLabel37.setText("pozos");

        jLabel38.setText("% de reservas anuales");

        jLabel39.setText("% de reservas");

        jLabel40.setText("$ por barril");

        jLabel41.setText("Miles de barriles/dia");

        btnCalcularVariables.setText("Evaluar / Calcular");
        btnCalcularVariables.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCalcularVariablesActionPerformed(evt);
            }
        });

        jLabel12.setText("Reservas");

        jLabel42.setText("Taza Maz de Meseta");

        jLabel43.setText("Taza de Meseta");

        jLabel44.setText("Aumento de Prod");

        jLabel45.setText("Prod. de Meseta");

        jLabel46.setText("Fin de Meseta");

        jLabel47.setText("Factor de Declive");

        jLabel48.setText("Vida Productiva");

        textCalcReserva.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textCalcReservaActionPerformed(evt);
            }
        });

        textCalcTazaMax.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textCalcTazaMaxActionPerformed(evt);
            }
        });

        textCalcAumentoProd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textCalcAumentoProdActionPerformed(evt);
            }
        });

        textCalcProdMeseta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textCalcProdMesetaActionPerformed(evt);
            }
        });

        textCalcFactDeclive.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textCalcFactDecliveActionPerformed(evt);
            }
        });

        textCalcVidaProd.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textCalcVidaProdActionPerformed(evt);
            }
        });

        jLabel49.setText("AÃ±os");

        jLabel50.setText("Mill. de barriles");

        jLabel56.setText("Mill. de de barriles");

        jLabel55.setText("Miles de barriles/dia");

        jLabel54.setText("Miles de barriles/dia");

        jLabel57.setText("Mill. de barriles");

        jLabel51.setText("AÃ±os");

        jLabel8.setFont(new java.awt.Font("Dialog", 1, 12)); // NOI18N
        jLabel8.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel8.setText("COSTOS DE INSTALACION");

        javax.swing.GroupLayout PanelEjercicio1Layout = new javax.swing.GroupLayout(PanelEjercicio1);
        PanelEjercicio1.setLayout(PanelEjercicio1Layout);
        PanelEjercicio1Layout.setHorizontalGroup(
            PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGap(101, 101, 101)
                                .addComponent(jLabel8, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGap(35, 35, 35)
                                .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 371, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 44, Short.MAX_VALUE)
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PanelEjercicio1Layout.createSequentialGroup()
                                        .addComponent(jLabel12)
                                        .addGap(3, 3, 3))
                                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PanelEjercicio1Layout.createSequentialGroup()
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(jLabel43)
                                            .addComponent(jLabel44)
                                            .addComponent(jLabel42))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)))
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(textCalcReserva, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(textCalcTazaMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(textCalcTazaMax, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addComponent(textCalcAumentoProd, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addGap(18, 18, 18)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(jLabel56)
                                            .addComponent(jLabel55)
                                            .addComponent(jLabel54)))
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addGap(18, 18, 18)
                                        .addComponent(jLabel50))))
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGap(16, 16, 16)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(jLabel47)
                                            .addComponent(jLabel46, javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addComponent(jLabel45, javax.swing.GroupLayout.Alignment.TRAILING))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addComponent(textCalcFinMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(textCalcProdMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE))
                                            .addComponent(textCalcFactDeclive, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addComponent(jLabel48)
                                        .addGap(18, 18, 18)
                                        .addComponent(textCalcVidaProd, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(18, 18, 18)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel49)
                                    .addComponent(jLabel57)
                                    .addComponent(jLabel51)))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PanelEjercicio1Layout.createSequentialGroup()
                                .addComponent(btnCrearTabla, javax.swing.GroupLayout.PREFERRED_SIZE, 159, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(83, 83, 83)))
                        .addGap(38, 38, 38))
                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                        .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                                    .addGap(25, 25, 25)
                                                    .addComponent(jLabel24))
                                                .addComponent(jLabel23, javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addComponent(jLabel22, javax.swing.GroupLayout.Alignment.TRAILING))
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                    .addComponent(textTazaMinima, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addComponent(textPozosAPerforar, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE))
                                                .addComponent(textFactDescuento, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                        .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                            .addComponent(jLabel25)
                                            .addGap(18, 18, 18)
                                            .addComponent(textCostoPozo, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE))
                                        .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addComponent(jLabel27)
                                                .addComponent(jLabel26)
                                                .addComponent(jLabel28)
                                                .addComponent(jLabel29))
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addComponent(textTamInstalacion, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(textMargenPetroleo, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(textMesetaTermina, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(textTazaMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE))))
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addGap(6, 6, 6)
                                        .addComponent(jLabel10)))
                                .addGap(18, 18, 18)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel30)
                                    .addComponent(jLabel31)
                                    .addComponent(jLabel32)
                                    .addComponent(jLabel33)))
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGap(240, 240, 240)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel37)
                                    .addComponent(jLabel36)
                                    .addComponent(jLabel35)
                                    .addComponent(jLabel41)
                                    .addComponent(jLabel40)
                                    .addComponent(jLabel39)
                                    .addComponent(jLabel38)
                                    .addComponent(jLabel34)))
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGap(21, 21, 21)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel5, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PanelEjercicio1Layout.createSequentialGroup()
                                                .addComponent(jLabel11)
                                                .addGap(3, 3, 3))
                                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PanelEjercicio1Layout.createSequentialGroup()
                                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                                    .addComponent(jLabel19)
                                                    .addComponent(jLabel21)
                                                    .addComponent(jLabel20))
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)))
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(textPetroleoAlmac, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                    .addComponent(textTiempoMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addComponent(textRecuperacion, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE))
                                                .addComponent(textTazaPozo, javax.swing.GroupLayout.PREFERRED_SIZE, 79, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(btnGenerador, javax.swing.GroupLayout.PREFERRED_SIZE, 117, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGap(164, 164, 164)
                                .addComponent(jLabel6, javax.swing.GroupLayout.PREFERRED_SIZE, 192, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PanelEjercicio1Layout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addComponent(btnCalcularVariables, javax.swing.GroupLayout.PREFERRED_SIZE, 158, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addGap(118, 118, 118)))))
                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel7)
                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                        .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 500, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(31, 31, 31)
                        .addComponent(btnGraficarEjercicio2, javax.swing.GroupLayout.PREFERRED_SIZE, 129, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 756, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(526, Short.MAX_VALUE))
            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                .addGap(32, 32, 32)
                .addComponent(btnEjemplo)
                .addGap(48, 48, 48)
                .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 587, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        PanelEjercicio1Layout.setVerticalGroup(
            PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                        .addComponent(jLabel1, javax.swing.GroupLayout.PREFERRED_SIZE, 38, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(23, 23, 23))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, PanelEjercicio1Layout.createSequentialGroup()
                        .addComponent(btnEjemplo)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)))
                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                        .addComponent(jLabel10)
                        .addGap(1, 1, 1)
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel5)
                            .addComponent(btnGenerador, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(textPetroleoAlmac, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel11, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel30))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(textRecuperacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel20)
                            .addComponent(jLabel31))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(textTiempoMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel19)
                            .addComponent(jLabel32))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(textTazaPozo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel21)
                            .addComponent(jLabel33))
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel22)
                                    .addComponent(textPozosAPerforar, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabel37))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel23)
                                    .addComponent(textTazaMinima, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(textFactDescuento, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                    .addComponent(jLabel24))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                    .addComponent(jLabel25)
                                    .addComponent(textCostoPozo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                        .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                            .addGap(6, 6, 6)
                                            .addComponent(jLabel41)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                            .addComponent(jLabel39)
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                            .addComponent(jLabel38))
                                        .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(jLabel26)
                                                .addComponent(textTamInstalacion, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(textMargenPetroleo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(jLabel27)
                                                .addComponent(jLabel40))
                                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(jLabel28)
                                                .addComponent(textMesetaTermina, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                            .addGap(3, 3, 3)
                                            .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(jLabel29)
                                                .addComponent(textTazaMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addGap(95, 95, 95)
                                        .addComponent(btnCrearTabla, javax.swing.GroupLayout.PREFERRED_SIZE, 54, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(33, 33, 33))
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGap(48, 48, 48)
                                .addComponent(jLabel36)
                                .addGap(18, 18, 18)
                                .addComponent(jLabel35)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jLabel34)))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel8))
                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                        .addComponent(jLabel7)
                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addGap(8, 8, 8)
                                        .addComponent(btnCalcularVariables, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                                        .addGap(18, 18, 18)
                                        .addComponent(jLabel6)
                                        .addGap(18, 18, 18)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(textCalcReserva, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel12, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel56))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(textCalcTazaMax, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel42)
                                            .addComponent(jLabel55))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(textCalcTazaMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel43)
                                            .addComponent(jLabel54))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(textCalcAumentoProd, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel44)
                                            .addComponent(jLabel50))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(jLabel45)
                                            .addComponent(textCalcProdMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel57))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(jLabel46)
                                            .addComponent(textCalcFinMeseta, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel51))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(textCalcFactDeclive, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel47))
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                        .addGroup(PanelEjercicio1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                                            .addComponent(jLabel48)
                                            .addComponent(textCalcVidaProd, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(jLabel49)))
                                    .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                        .addGap(18, 18, 18)
                                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 327, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(37, 37, 37)
                                .addComponent(jScrollPane4, javax.swing.GroupLayout.PREFERRED_SIZE, 87, javax.swing.GroupLayout.PREFERRED_SIZE))
                            .addGroup(PanelEjercicio1Layout.createSequentialGroup()
                                .addGap(407, 407, 407)
                                .addComponent(btnGraficarEjercicio2)))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, 134, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(926, Short.MAX_VALUE))
        );

        jScrollPane1.setViewportView(PanelEjercicio1);
        PanelEjercicio1.getAccessibleContext().setAccessibleDescription("");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 884, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 560, Short.MAX_VALUE)
        );
    }// </editor-fold>//GEN-END:initComponents

    private void textTazaPozoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textTazaPozoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textTazaPozoActionPerformed

    private void btnGeneradorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGeneradorActionPerformed
        // Generadores
        Random random = new Random();
        JDKRandomGenerator rng = new JDKRandomGenerator();

        // textPetroleoAlmac - DistribuciÃ³n log-normal (ubicaciÃ³n 0, media 1500, desv. 300)
        double mediaPetroleo = 1500;
        double desvPetroleo = 300;
        double muPetroleo = Math.log(Math.pow(mediaPetroleo, 2) / Math.sqrt(Math.pow(desvPetroleo, 2) + Math.pow(mediaPetroleo, 2)));
        double sigmaPetroleo = Math.sqrt(Math.log(1 + (Math.pow(desvPetroleo, 2) / Math.pow(mediaPetroleo, 2))));
        LogNormalDistribution logNormalPetroleo = new LogNormalDistribution(rng, muPetroleo, sigmaPetroleo);
        double valorPetroleo = logNormalPetroleo.sample();

        // textRecuperacion - DistribuciÃ³n normal (media 42, desv. 1.2)
        NormalDistribution normalRecuperacion = new NormalDistribution(42, 1.2);
        double valorRecuperacion = normalRecuperacion.sample();

        // textTazaPozo - DistribuciÃ³n normal (media 10, desv. 3)
        NormalDistribution normalTazaPozo = new NormalDistribution(10, 3);
        double valorTazaPozo = normalTazaPozo.sample();

        // textFactDescuento - DistribuciÃ³n log-normal (ubicaciÃ³n 0, media 10, desv. 1.2)
        double mediaDescuento = 10;
        double desvDescuento = 1.2;
        double muDescuento = Math.log(Math.pow(mediaDescuento, 2) / Math.sqrt(Math.pow(desvDescuento, 2) + Math.pow(mediaDescuento, 2)));
        double sigmaDescuento = Math.sqrt(Math.log(1 + (Math.pow(desvDescuento, 2) / Math.pow(mediaDescuento, 2))));
        LogNormalDistribution logNormalDescuento = new LogNormalDistribution(rng, muDescuento, sigmaDescuento);
        double valorDescuento = logNormalDescuento.sample();

        // textCostoPozo - DistribuciÃ³n triangular (min:9, moda:10, max:12)
        double min = 9, moda = 10, max = 12;
        double u = random.nextDouble();
        double valorCostoPozo;
        if (u < (moda - min) / (max - min)) {
            valorCostoPozo = min + Math.sqrt(u * (moda - min) * (max - min));
        } else {
            valorCostoPozo = max - Math.sqrt((1 - u) * (max - moda) * (max - min));
        }

        // Establecer los valores generados en los campos de texto (con 2 decimales)
        textPetroleoAlmac.setText(String.format("%.2f", valorPetroleo));
        textRecuperacion.setText(String.format("%.2f", valorRecuperacion));
        textTazaPozo.setText(String.format("%.2f", valorTazaPozo));
        textFactDescuento.setText(String.format("%.2f", valorDescuento));
        textCostoPozo.setText(String.format("%.2f", valorCostoPozo));
    }//GEN-LAST:event_btnGeneradorActionPerformed

    private void btnCrearTablaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCrearTablaActionPerformed
        DefaultTableModel modelo = (DefaultTableModel) tablaFinal.getModel();
        modelo.setRowCount(0); // Limpiar la tabla antes de agregar nuevos datos

        try {
            // Variables de entrada
        int tiempoHastaMeseta = Integer.parseInt(textTiempoMeseta.getText());
        double factorDescuento = Double.parseDouble(textFactDescuento.getText());
        int pozosAperforar = Integer.parseInt(textPozosAPerforar.getText());
        double costoPozo = Double.parseDouble(textCostoPozo.getText());
        int margenPetroleo = Integer.parseInt(textMargenPetroleo.getText());
        int tamanioInstalacion = Integer.parseInt(textTamInstalacion.getText());
        
        // Variables calculadas
        double tasaMeseta = Double.parseDouble(textCalcTazaMeseta.getText());
        double calcFinMeseta = Double.parseDouble(textCalcFinMeseta.getText());
        double calcFactDeclive = Double.parseDouble(textCalcFactDeclive.getText());
        double calcVidaProd = Double.parseDouble(textCalcVidaProd.getText());

        double acumulado = 0.0;
        double petroleoDescontado = 0.0;

        for (int i = 0; i < 50; i++) {
            int anio = i + 1;
            double produccionAnual;

            if (anio < tiempoHastaMeseta + 1) {
                produccionAnual = anio * 0.365 * tasaMeseta / (tiempoHastaMeseta + 1);
            } else {
                double parte1 = Math.max(0, Math.min(calcFinMeseta + 1 - anio, 1));
                double parte2 = Math.exp(-calcFactDeclive * Math.max(0, Math.min(calcVidaProd, anio - 1) - calcFinMeseta));
                double parte3 = Math.exp(-calcFactDeclive * Math.max(Math.min(calcVidaProd, anio) - calcFinMeseta, 0));
                produccionAnual = 0.365 * tasaMeseta * (parte1 + (parte2 - parte3) / calcFactDeclive);
            }

            double tasaAnualizada = produccionAnual / 0.365;
            acumulado += produccionAnual;

            if (i == 0) {
                petroleoDescontado = produccionAnual;
            } else {
                petroleoDescontado += produccionAnual / Math.pow((1 + 0.01 * factorDescuento), anio-1);
            }

            modelo.addRow(new Object[]{
                anio,
                String.format("%.2f", tasaAnualizada),
                String.format("%.2f", produccionAnual),
                String.format("%.2f", acumulado),
                String.format("%.2f", petroleoDescontado)
            });
            
            

        }
        
        actualizarTablaEstadisticos(petroleoDescontado, pozosAperforar, costoPozo, tamanioInstalacion, margenPetroleo);

        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Por favor, ingrese valores numÃ©ricos vÃ¡lidos.", "Error", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_btnCrearTablaActionPerformed

    private void actualizarTablaEstadisticos(double petroleoDescontado,int pozosAperforar, double costoPozo, int tamanioInstalacion, int margenPetroleo) {
        DefaultTableModel modeloEstadisticos = (DefaultTableModel) tablaEstadisticos.getModel();
        DefaultTableModel modeloCostos = (DefaultTableModel) tablaCostosInstalacion.getModel();

        modeloEstadisticos.setRowCount(0); // Limpiar la tabla

        // Fila 0: ProducciÃ³n descontada total
        modeloEstadisticos.addRow(new Object[]{"Total Reservas Descontadas", String.format("%.2f", petroleoDescontado), "mill. de barriles"});

        // Fila 1: Costo Total de Pozos
        double costoPozos = pozosAperforar * costoPozo;
        modeloEstadisticos.addRow(new Object[]{"Costo Total de Pozos", String.format("%.2f", costoPozos), "Mill de dolares"});

        // Fila 2: Costo de InstalaciÃ³n (tipo buscarV)
        double costoInstalacion = 0.0;

        for (int i = 0; i < modeloCostos.getRowCount(); i++) {
            int valorInicial = Integer.parseInt(modeloCostos.getValueAt(i, 0).toString());
            int valorFinal = Integer.parseInt(modeloCostos.getValueAt(i, 1).toString());
            if (tamanioInstalacion >= valorInicial && tamanioInstalacion <= valorFinal) {
                costoInstalacion = Double.parseDouble(modeloCostos.getValueAt(i, 2).toString());
                break;
            }
        }

        modeloEstadisticos.addRow(new Object[]{"Costo de InstalaciÃ³n", String.format("%.2f", costoInstalacion), "Mill de dolares"});

        // Fila 3: Margen Neto Estimado
        double margenNeto = petroleoDescontado * margenPetroleo - costoPozos - costoInstalacion;

        modeloEstadisticos.addRow(new Object[]{"VPN", String.format("%.2f", margenNeto), "Mill de dolares"});
    }
    
    
    // MÃ©todo para calcular el promedio
    private double calcularPromedio(double[] datos) {
        double suma = 0;
        for (double valor : datos) {
            suma += valor;
        }
        return suma / datos.length;
    }
    

    // MÃ©todo para calcular la desviaciÃ³n estÃ¡ndar muestral
    private double calcularDesviacionEstandarMuestral(double[] datos) {
        int n = datos.length;
        if (n < 2) return 0; // No se puede calcular con menos de 2 datos

        double suma = 0;
        double sumaCuadrados = 0;
        double res = 0;

        for (double valor : datos) {
            suma += valor;
        }

        double media = suma / n;

        for (double valor : datos) {
            sumaCuadrados += Math.pow(valor - media, 2);
        }
        
        res = Math.sqrt(sumaCuadrados / (n - 1));

        return res; // Se divide por (n - 1) para la muestra
    }
    
    
    private void btnEjemploActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEjemploActionPerformed
        textPetroleoAlmac.setText(String.valueOf(1500.00));
        textRecuperacion.setText(String.valueOf(42.00));
        textTiempoMeseta.setText(String.valueOf(2));
        textTazaPozo.setText(String.valueOf(10.00));
        textPozosAPerforar.setText(String.valueOf(25));
        textTazaMinima.setText(String.valueOf(10));
        textFactDescuento.setText(String.valueOf(10.00));
        textCostoPozo.setText(String.valueOf(10.00));
        textTamInstalacion.setText(String.valueOf(250));
        textMargenPetroleo.setText(String.valueOf(2));
        textMesetaTermina.setText(String.valueOf(65));
        textTazaMeseta.setText(String.valueOf(10));

    }//GEN-LAST:event_btnEjemploActionPerformed

    private void textRecuperacionActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textRecuperacionActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textRecuperacionActionPerformed

    private void textPetroleoAlmacActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textPetroleoAlmacActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textPetroleoAlmacActionPerformed

    private void textPozosAPerforarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textPozosAPerforarActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textPozosAPerforarActionPerformed

    private void textFactDescuentoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textFactDescuentoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textFactDescuentoActionPerformed

    private void btnGraficarEjercicio2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGraficarEjercicio2ActionPerformed
       int iteraciones = 100; // O el nÃºmero que desees, mÃ­nimo 50
        java.util.List<Double> valoresVPN = new ArrayList<>();

        for (int i = 0; i < iteraciones; i++) {
            // Simula presionar los botones
            btnGeneradorActionPerformed(null);
            btnCalcularVariablesActionPerformed(null);
            btnCrearTablaActionPerformed(null);

            try {
                // Extrae el valor del VPN (fila 3, columna 1 )
                Object valorObj = tablaEstadisticos.getValueAt(3, 1);
                if (valorObj != null) {
                    double vpn = Double.parseDouble(valorObj.toString());
                    valoresVPN.add(vpn);
                }
            } catch (Exception e) {
                System.out.println("Error obteniendo VPN en iteraciÃ³n " + i + ": " + e.getMessage());
            }
        }

        // Crear dataset para JFreeChart
        HistogramDataset dataset = new HistogramDataset();
        double[] dataArray = valoresVPN.stream().mapToDouble(Double::doubleValue).toArray();
        dataset.addSeries("VPN", dataArray, 40); // 40 bins

        // Crear el grÃ¡fico
        JFreeChart histograma = ChartFactory.createHistogram(
                "VPN", "VPN", "Frecuencia", dataset,
                PlotOrientation.VERTICAL, false, true, false);

        // Personalizar estilo (opcional)
        XYPlot plot = (XYPlot) histograma.getPlot();
        plot.setBackgroundPaint(Color.WHITE);
        plot.setDomainGridlinePaint(Color.GRAY);
        plot.setRangeGridlinePaint(Color.GRAY);

        // Mostrar grÃ¡fico en ventana
        ChartPanel panel = new ChartPanel(histograma);
        JFrame frame = new JFrame("Histograma de VPN");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.add(panel);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }//GEN-LAST:event_btnGraficarEjercicio2ActionPerformed

    private void textCostoPozoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textCostoPozoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textCostoPozoActionPerformed

    private void textMargenPetroleoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textMargenPetroleoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textMargenPetroleoActionPerformed

    private void btnCalcularVariablesActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCalcularVariablesActionPerformed
       try {
            // Valores corregidos como double
            double cantPetroleo = Double.parseDouble(textPetroleoAlmac.getText());
            double recuperacion = Double.parseDouble(textRecuperacion.getText());
            int tiempoHastaMeseta = Integer.parseInt(textTiempoMeseta.getText());
            double tasaDelPozo = Double.parseDouble(textTazaPozo.getText());
            int pozosAPerforar = Integer.parseInt(textPozosAPerforar.getText());
            int tasaMinima = Integer.parseInt(textTazaMinima.getText());
            double factorDescuento = Double.parseDouble(textFactDescuento.getText());
            double costoDePozo = Double.parseDouble(textCostoPozo.getText());
            int tamInstalacion = Integer.parseInt(textTamInstalacion.getText());
            int margenPetroleo = Integer.parseInt(textMargenPetroleo.getText());
            int mesetaTerminaEn = Integer.parseInt(textMesetaTermina.getText());
            double tasaMesetaEs = Double.parseDouble(textTazaMeseta.getText());

            // CÃ¡lculos con dos decimales
            double fila0 = (cantPetroleo * recuperacion) / 100.0;  // Reservas
            double fila1 = (tasaMesetaEs / 100.0) * fila0 / 0.365; // Tasa mÃ¡xima de meseta
            double fila2 = Math.min(Math.min(fila1, tasaDelPozo * pozosAPerforar), tamInstalacion); // Tasa de meseta
            double fila3 = 0.365 * fila2 * 0.5 * tiempoHastaMeseta; // Aumento de producciÃ³n
            double fila4 = Math.max(0, mesetaTerminaEn * (fila0 / 100.0) - fila3); // ProducciÃ³n de meseta
            double fila5 = fila4 / (0.365 * fila2) + tiempoHastaMeseta; // Fin de meseta (aÃ±os)
            double fila6 = 0.365 * (fila2 - tasaMinima) / (fila0 - fila4 - fila3); // Factor de declive

            double fila7;
            if (tasaMinima > 0 && fila2 > 0 && fila6 > 0) {
                double logaritmo = Math.log(tasaMinima / fila2);
                fila7 = fila5 - logaritmo / fila6; // Vida productiva
            } else {
                fila7 = Double.POSITIVE_INFINITY;
            }

            // Mostrar resultados con 2 decimales
            textCalcReserva.setText(String.format("%.2f", fila0));
            textCalcTazaMax.setText(String.format("%.2f", fila1));
            textCalcTazaMeseta.setText(String.format("%.2f", fila2));
            textCalcAumentoProd.setText(String.format("%.2f", fila3));
            textCalcProdMeseta.setText(String.format("%.2f", fila4));
            textCalcFinMeseta.setText(String.format("%.2f", fila5));
            textCalcFactDeclive.setText(String.format("%.2f", fila6));
            textCalcVidaProd.setText(String.format("%.2f", fila7));

        } catch (NumberFormatException e) {
            JOptionPane.showMessageDialog(this, "Por favor, ingrese valores numÃ©ricos vÃ¡lidos.", "Error", JOptionPane.ERROR_MESSAGE);
        }
    }//GEN-LAST:event_btnCalcularVariablesActionPerformed

    private void textCalcReservaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textCalcReservaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textCalcReservaActionPerformed

    private void textCalcTazaMaxActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textCalcTazaMaxActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textCalcTazaMaxActionPerformed

    private void textCalcAumentoProdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textCalcAumentoProdActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textCalcAumentoProdActionPerformed

    private void textCalcProdMesetaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textCalcProdMesetaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textCalcProdMesetaActionPerformed

    private void textCalcFactDecliveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textCalcFactDecliveActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textCalcFactDecliveActionPerformed

    private void textCalcVidaProdActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textCalcVidaProdActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_textCalcVidaProdActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JPanel PanelEjercicio1;
    private javax.swing.JButton btnCalcularVariables;
    private javax.swing.JButton btnCrearTabla;
    private javax.swing.JButton btnEjemplo;
    private javax.swing.JButton btnGenerador;
    private javax.swing.JButton btnGraficarEjercicio2;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel19;
    private javax.swing.JLabel jLabel20;
    private javax.swing.JLabel jLabel21;
    private javax.swing.JLabel jLabel22;
    private javax.swing.JLabel jLabel23;
    private javax.swing.JLabel jLabel24;
    private javax.swing.JLabel jLabel25;
    private javax.swing.JLabel jLabel26;
    private javax.swing.JLabel jLabel27;
    private javax.swing.JLabel jLabel28;
    private javax.swing.JLabel jLabel29;
    private javax.swing.JLabel jLabel30;
    private javax.swing.JLabel jLabel31;
    private javax.swing.JLabel jLabel32;
    private javax.swing.JLabel jLabel33;
    private javax.swing.JLabel jLabel34;
    private javax.swing.JLabel jLabel35;
    private javax.swing.JLabel jLabel36;
    private javax.swing.JLabel jLabel37;
    private javax.swing.JLabel jLabel38;
    private javax.swing.JLabel jLabel39;
    private javax.swing.JLabel jLabel40;
    private javax.swing.JLabel jLabel41;
    private javax.swing.JLabel jLabel42;
    private javax.swing.JLabel jLabel43;
    private javax.swing.JLabel jLabel44;
    private javax.swing.JLabel jLabel45;
    private javax.swing.JLabel jLabel46;
    private javax.swing.JLabel jLabel47;
    private javax.swing.JLabel jLabel48;
    private javax.swing.JLabel jLabel49;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel50;
    private javax.swing.JLabel jLabel51;
    private javax.swing.JLabel jLabel54;
    private javax.swing.JLabel jLabel55;
    private javax.swing.JLabel jLabel56;
    private javax.swing.JLabel jLabel57;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JProgressBar jProgressBar1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JScrollPane jScrollPane4;
    private javax.swing.JTable tablaCostosInstalacion;
    private javax.swing.JTable tablaEstadisticos;
    private javax.swing.JTable tablaFinal;
    private javax.swing.JTextField textCalcAumentoProd;
    private javax.swing.JTextField textCalcFactDeclive;
    private javax.swing.JTextField textCalcFinMeseta;
    private javax.swing.JTextField textCalcProdMeseta;
    private javax.swing.JTextField textCalcReserva;
    private javax.swing.JTextField textCalcTazaMax;
    private javax.swing.JTextField textCalcTazaMeseta;
    private javax.swing.JTextField textCalcVidaProd;
    private javax.swing.JTextField textCostoPozo;
    private javax.swing.JTextField textFactDescuento;
    private javax.swing.JTextField textMargenPetroleo;
    private javax.swing.JTextField textMesetaTermina;
    private javax.swing.JTextField textPetroleoAlmac;
    private javax.swing.JTextField textPozosAPerforar;
    private javax.swing.JTextField textRecuperacion;
    private javax.swing.JTextField textTamInstalacion;
    private javax.swing.JTextField textTazaMeseta;
    private javax.swing.JTextField textTazaMinima;
    private javax.swing.JTextField textTazaPozo;
    private javax.swing.JTextField textTiempoMeseta;
    // End of variables declaration//GEN-END:variables
}
